--테이블 삭제
--DROP TABLE 테이블이름 CASCADE CONSTRAINTS;
DROP TABLE TBL_AFTER CASCADE CONSTRAINTS;
DROP TABLE TBL_ASK CASCADE CONSTRAINTS;
DROP TABLE TBL_HOTEL CASCADE CONSTRAINTS;
DROP TABLE TBL_MEMBER CASCADE CONSTRAINTS;
DROP TABLE TBL_RESERVE CASCADE CONSTRAINTS;
DROP TABLE TBL_ROOM CASCADE CONSTRAINTS;
DROP TABLE TBL_REVIEW CASCADE CONSTRAINTS;

--테이블
CREATE TABLE "TBL_MEMBER" (
   "USER_ID"   VARCHAR2(20)      NOT NULL,
   "PASSWORD"   VARCHAR2(20)      NOT NULL,
   "NAME"   VARCHAR2(20)      NOT NULL,
   "PHONE"   VARCHAR2(20)      NOT NULL,
   "EMAIL"   VARCHAR2(50)      NOT NULL
);

CREATE TABLE "TBL_HOTEL" (
   "HOTEL_ID"   VARCHAR2(20)      NOT NULL,
   "HOTEL_NAME"   VARCHAR2(20)      NOT NULL,
   "HOTEL_PHONE"   VARCHAR2(20)      NOT NULL
);

CREATE TABLE "TBL_RESERVE" (
   "RESERVE_NO"   NUMBER(10)      NOT NULL,
   "USER_ID"   VARCHAR2(20)      NOT NULL,
   "HOTEL_ID"   VARCHAR2(20)      NOT NULL,
   "ROOM_ID"   VARCHAR2(20)      NOT NULL,
   "RESERVE_NAME"   VARCHAR2(20)      NOT NULL,
   "RESERVE_PHONE"   VARCHAR2(20)      NOT NULL,
   "RESERVE_EMAIL"   VARCHAR2(50)      NOT NULL,
   "CHECKIN"   DATE      NOT NULL,
   "CHECKOUT"   DATE      NOT NULL,
   "NUM_OF_USER"   NUMBER(1)      NOT NULL
);

CREATE TABLE "TBL_ASK" (
   "ASK_NO"   NUMBER(10)      NOT NULL,
   "ASK_NAME"   VARCHAR2(20)      NOT NULL,
   "ASK_TITLE"   VARCHAR2(100)      NOT NULL,
   "ASK_CONTENT"   VARCHAR2(1000)      NOT NULL,
   "ASK_PHONE"   VARCHAR2(20)      NOT NULL,
   "ASK_EMAIL"   VARCHAR2(50)      NOT NULL,
   "ASK_DATE"   VARCHAR2(20)      NOT NULL
);

CREATE TABLE "TBL_REVIEW" (
   "NO"   NUMBER(5)      NOT NULL,
   "USER_ID"   VARCHAR2(20)      NOT NULL,
   "TITLE"   VARCHAR2(100)      NOT NULL,
   "CONTENT"   VARCHAR2(4000)      NOT NULL,
   "HIT"   NUMBER(5)   DEFAULT 0   NULL,
   "REGDATE"   DATE   DEFAULT SYSDATE   NULL,
   "REPLY_GROUP"   NUMBER(5)   DEFAULT 0   NOT NULL,
   "REPLY_ORDER"   NUMBER(5)   DEFAULT 0   NOT NULL,
   "REPLY_INDENT"   NUMBER(5)   DEFAULT 0   NOT NULL
);

CREATE TABLE "TBL_ROOM" (
   "ROOM_ID"   VARCHAR2(20)      NOT NULL,
   "ROOM_NAME"   VARCHAR2(20)      NOT NULL,
   "ROOM_TYPE"   VARCHAR2(20)      NOT NULL,
   "ROOM_CAPACITY"   NUMBER(4)      NOT NULL,
   "ROOM_PRICE"   VARCHAR2(20)      NOT NULL
);

ALTER TABLE "TBL_MEMBER" ADD CONSTRAINT "PK_TBL_MEMBER" PRIMARY KEY (
   "USER_ID"
);

ALTER TABLE "TBL_HOTEL" ADD CONSTRAINT "PK_TBL_HOTEL" PRIMARY KEY (
   "HOTEL_ID"
);

ALTER TABLE "TBL_RESERVE" ADD CONSTRAINT "PK_TBL_RESERVE" PRIMARY KEY (
   "RESERVE_NO"
);

ALTER TABLE "TBL_ASK" ADD CONSTRAINT "PK_TBL_ASK" PRIMARY KEY (
   "ASK_NO"
);

ALTER TABLE "TBL_REVIEW" ADD CONSTRAINT "PK_TBL_REVIEW" PRIMARY KEY (
   "NO"
);

ALTER TABLE "TBL_ROOM" ADD CONSTRAINT "PK_TBL_ROOM" PRIMARY KEY (
   "ROOM_ID"
);

ALTER TABLE "TBL_RESERVE" ADD CONSTRAINT "FK_TBL_MEMBER_TO_TBL_RESERVE_1" FOREIGN KEY (
   "USER_ID"
)
REFERENCES "TBL_MEMBER" (
   "USER_ID"
);

ALTER TABLE "TBL_RESERVE" ADD CONSTRAINT "FK_TBL_HOTEL_TO_TBL_RESERVE_1" FOREIGN KEY (
   "HOTEL_ID"
)
REFERENCES "TBL_HOTEL" (
   "HOTEL_ID"
);

ALTER TABLE "TBL_RESERVE" ADD CONSTRAINT "FK_TBL_ROOM_TO_TBL_RESERVE_1" FOREIGN KEY (
   "ROOM_ID"
)
REFERENCES "TBL_ROOM" (
   "ROOM_ID"
);

ALTER TABLE "TBL_REVIEW" ADD CONSTRAINT "FK_TBL_MEMBER_TO_TBL_REVIEW_1" FOREIGN KEY (
   "USER_ID"
)
REFERENCES "TBL_MEMBER" (
   "USER_ID"
);


--------

--시퀀스
DROP SEQUENCE SEQ_AFTER_NO;
DROP SEQUENCE SEQ_RESERVE_NO;
DROP SEQUENCE ASK_NO_SEQ;

CREATE SEQUENCE SEQ_RESERVE_NO INCREMENT BY 1 START WITH 20230001;
CREATE SEQUENCE ASK_NO_SEQ INCREMENT BY 1 START WITH 1;
CREATE SEQUENCE SEQ_AFTER_NO INCREMENT BY 1 START WITH 1;


--고객 데이터 "TBL_MEMBER"
INSERT INTO TBL_MEMBER(USER_ID, PASSWORD, NAME, PHONE, EMAIL)
 VALUES ('user01', '1234', '홍길동', '010-1111-1111', 'HONG@NAVER.COM');
 
--호텔 데이터 "TBL_HOTEL"
INSERT INTO TBL_HOTEL(HOTEL_ID, HOTEL_NAME, HOTEL_PHONE)
 VALUES ('hotel1', 'EZEN_HOTEL', '031-444-7894');
 
--룸 데이터 "TBL_ROOM"
INSERT INTO TBL_ROOM(ROOM_ID, ROOM_NAME, ROOM_TYPE, ROOM_CAPACITY, ROOM_PRICE)
 VALUES ('room1', '디럭스 킹', 'DELUXE KING', 4, '107000');
INSERT INTO TBL_ROOM(ROOM_ID, ROOM_NAME, ROOM_TYPE, ROOM_CAPACITY, ROOM_PRICE)
 VALUES ('room2', '디럭스 트윈', 'DELUXE TWIN', 4, '117000');
INSERT INTO TBL_ROOM(ROOM_ID, ROOM_NAME, ROOM_TYPE, ROOM_CAPACITY, ROOM_PRICE)
 VALUES ('room3', '로얄 스위트', 'ROYAL SUITE', 4, '560000');
 
--예약 데이터 "TBL_RESERVE"
INSERT INTO TBL_RESERVE(RESERVE_NO, USER_ID, HOTEL_ID, ROOM_ID, RESERVE_NAME, RESERVE_PHONE, RESERVE_EMAIL, CHECKIN, CHECKOUT, NUM_OF_USER)
 VALUES (11111111, 'user01', 'hotel1', 'room1', '홍길동', '010-1111-1111', 'HONG@NAVER.COM', TO_DATE('2023-05-15', 'YYYY-MM-DD'), TO_DATE('2023-05-17', 'YYYY-MM-DD'), 4);

COMMIT;
